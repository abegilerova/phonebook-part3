{"version":3,"sources":["services/persons.js","components/PersonForm.js","components/Persons.js","components/Filter.js","App.js","index.js"],"names":["baseUrl","axios","get","newObject","post","then","response","data","id","put","delete","PersonsForm","persons","setPersons","useState","newName","setNewName","newNumber","setNewNumber","onSubmit","event","preventDefault","personsFiltered","filter","person","name","personObject","number","length","window","confirm","idToBeUpdated","personService","updatedPerson","map","returnedPerson","concat","value","onChange","target","type","Persons","newSearch","foundPeople","el","key","onClick","console","log","p","deletePerson","Filter","setNewSearch","setFoundPeople","filteredPeople","includes","App","props","useEffect","PersonForm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2823793c.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then((response) => response.data)\n}\n\nconst deleteObject = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    //return request.then(response => response.data)\n    return request.then(() => id)\n}\n\nexport default {\n    getAll: getAll,\n    create: create,\n    update: update,\n    deleteObject: deleteObject\n}","import React, { useState } from 'react';\nimport personService from '../services/persons';\n\n\nconst PersonsForm = ({ persons, setPersons }) => {\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n\n    const handleNameChange = (event) => {\n        setNewName(event.target.value);\n    }\n\n    const handleNumberChange = (event) => {\n        setNewNumber(event.target.value);\n    }\n\n    const addPerson = (event) => {\n        event.preventDefault();\n        const personsFiltered = persons.filter(person => person.name === newName);\n        // console.log('form submitted', event.target);\n        // console.log(typeof newPerson);\n        const personObject = {\n            name: newName,\n            number: newNumber,\n            id: persons.length + 1,\n        }\n\n        if (personsFiltered.length > 0) {\n            if (window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`)) {\n                const idToBeUpdated = personsFiltered[0].id;\n                personService\n                    .update(idToBeUpdated, personObject)\n                    .then(updatedPerson => {\n                        setPersons(persons.map(person => person.id !== idToBeUpdated ? person : updatedPerson))\n                        setNewName('')\n                        setNewNumber('')\n                    })\n            }\n        } else {\n            personService\n                .create(personObject)\n                .then(returnedPerson => {\n                    setPersons(persons.concat(returnedPerson))\n                    setNewName('')\n                    setNewNumber('')\n                })\n        }\n\n    }\n\n\n    return (\n        <form onSubmit={addPerson} >\n            <div>\n                name: <input value={newName} onChange={handleNameChange} />\n                number: <input value={newNumber} onChange={handleNumberChange} />\n            </div>\n\n            <div>\n                <button type=\"submit\">add</button>\n\n            </div>\n        </form>\n    )\n}\n\n\nexport default PersonsForm\n","import React from 'react';\nimport personService from '../services/persons';\n\n\nconst Persons = ({ newSearch, foundPeople, persons, id, setPersons }) => {\n\n    const deletePerson = (id, name) => {\n        console.log('deleting')\n        if (window.confirm(`Delete ${name}?`)) {\n            personService.deleteObject(id).then(id => {\n                setPersons(persons.filter(p => p.id !== id))\n            })\n        }\n    }\n\n    const displayNames = () => newSearch.length > 0 ? foundPeople.map(el => <li key={el.id}>{el.name} {el.number} <button>Delete</button></li>) : persons.map(el => <li key={el.id}>{el.name} {el.number} <button onClick={() => deletePerson(el.id, el.name)}>Delete</button></li>);\n\n\n    return (\n        <div>\n            <ul>\n                {displayNames()}\n            </ul>\n\n        </div>\n    )\n}\n\nexport default Persons\n","import React from 'react';\n\n\nconst Filter = ({ newSearch, setNewSearch, persons, setFoundPeople }) => {\n\n    const handleSearch = (event) => {\n        setNewSearch(event.target.value);\n        const filteredPeople = persons.filter(el => el.name.includes(newSearch));\n        setFoundPeople(filteredPeople);\n    }\n\n\n    return (\n        <div>\n            filter shown with <input value={newSearch} onChange={handleSearch} />\n        </div>\n    )\n}\n\nexport default Filter\n","import React, { useState, useEffect } from 'react';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Filter from './components/Filter';\nimport personService from './services/persons'\n\nconst App = (props) => {\n\n\n\n  const [persons, setPersons] = useState([])\n\n  useEffect(() => {\n    console.log('effect')\n    personService.getAll()\n      .then(response => {\n        console.log('promise fulfilled', response.data)\n        setPersons(response.data)\n      })\n  }, [])\n  console.log('render', persons.length, 'persons');\n\n  const [foundPeople, setFoundPeople] = useState([]);\n  const [newSearch, setNewSearch] = useState('');\n\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Filter newSearch={newSearch} setNewSearch={setNewSearch} persons={persons} setFoundPeople={setFoundPeople} />\n      <h3>add a new </h3>\n      <PersonForm persons={persons} setPersons={setPersons} />\n      <h3>Numbers</h3>\n      <Persons newSearch={newSearch} foundPeople={foundPeople} persons={persons} setPersons={setPersons} />\n    </div>\n  )\n}\n\nexport default App;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}
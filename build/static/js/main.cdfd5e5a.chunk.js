(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=(t(19),t(3)),l=t(2),i=t.n(l),s="/api/persons",f=function(e){return i.a.post(s,e).then((function(e){return e.data}))},m=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},d=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(){return e}))},p=function(e){var n=e.persons,t=e.setPersons,o=Object(a.useState)(""),c=Object(u.a)(o,2),l=c[0],i=c[1],s=Object(a.useState)(""),d=Object(u.a)(s,2),p=d[0],h=d[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=n.filter((function(e){return e.name===l})),r={name:l,number:p,id:n.length+1};if(a.length>0){if(window.confirm("".concat(l," is already added to phonebook, replace the old number with new one?"))){var o=a[0].id;m(o,r).then((function(e){t(n.map((function(n){return n.id!==o?n:e}))),i(""),h("")}))}}else f(r).then((function(e){t(n.concat(e)),i(""),h("")}))}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:l,onChange:function(e){i(e.target.value)}}),"number: ",r.a.createElement("input",{value:p,onChange:function(e){h(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},h=function(e){var n=e.newSearch,t=e.foundPeople,a=e.persons,o=(e.id,e.setPersons);return r.a.createElement("div",null,r.a.createElement("ul",null,n.length>0?t.map((function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",null,"Delete"))})):a.map((function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return function(e,n){console.log("deleting"),window.confirm("Delete ".concat(n,"?"))&&d(e).then((function(e){o(a.filter((function(n){return n.id!==e})))}))}(e.id,e.name)}},"Delete"))}))))},b=function(e){var n=e.newSearch,t=e.setNewSearch,a=e.persons,o=e.setFoundPeople;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:function(e){t(e.target.value);var r=a.filter((function(e){return e.name.includes(n)}));o(r)}}))},E=function(e){var n=Object(a.useState)([{name:"Arto Hellas",number:"0700249207",id:0}]),t=Object(u.a)(n,2),o=t[0],c=t[1];Object(a.useEffect)((function(){console.log("effect"),i.a.get("http://localhost:3001/api/persons").then((function(e){console.log("promise fulfilled",e.data),c(e.data)}))}),[]),console.log("render",o.length,"persons");var l=Object(a.useState)([]),s=Object(u.a)(l,2),f=s[0],m=s[1],d=Object(a.useState)(""),E=Object(u.a)(d,2),v=E[0],g=E[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(b,{newSearch:v,setNewSearch:g,persons:o,setFoundPeople:m}),r.a.createElement("h3",null,"add a new "),r.a.createElement(p,{persons:o,setPersons:c}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(h,{newSearch:v,foundPeople:f,persons:o,setPersons:c}))};c.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.cdfd5e5a.chunk.js.map
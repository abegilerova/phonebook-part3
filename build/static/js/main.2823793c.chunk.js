(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=(t(19),t(2)),l=t(3),i=t.n(l),s="/api/persons",f=function(){return i.a.get(s)},m=function(e){return i.a.post(s,e).then((function(e){return e.data}))},d=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},h=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(){return e}))},p=function(e){var n=e.persons,t=e.setPersons,o=Object(a.useState)(""),c=Object(u.a)(o,2),l=c[0],i=c[1],s=Object(a.useState)(""),f=Object(u.a)(s,2),h=f[0],p=f[1];return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=n.filter((function(e){return e.name===l})),r={name:l,number:h,id:n.length+1};if(a.length>0){if(window.confirm("".concat(l," is already added to phonebook, replace the old number with new one?"))){var o=a[0].id;d(o,r).then((function(e){t(n.map((function(n){return n.id!==o?n:e}))),i(""),p("")}))}}else m(r).then((function(e){t(n.concat(e)),i(""),p("")}))}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:l,onChange:function(e){i(e.target.value)}}),"number: ",r.a.createElement("input",{value:h,onChange:function(e){p(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},b=function(e){var n=e.newSearch,t=e.foundPeople,a=e.persons,o=(e.id,e.setPersons);return r.a.createElement("div",null,r.a.createElement("ul",null,n.length>0?t.map((function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",null,"Delete"))})):a.map((function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return function(e,n){console.log("deleting"),window.confirm("Delete ".concat(n,"?"))&&h(e).then((function(e){o(a.filter((function(n){return n.id!==e})))}))}(e.id,e.name)}},"Delete"))}))))},E=function(e){var n=e.newSearch,t=e.setNewSearch,a=e.persons,o=e.setFoundPeople;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:function(e){t(e.target.value);var r=a.filter((function(e){return e.name.includes(n)}));o(r)}}))},v=function(e){var n=Object(a.useState)([]),t=Object(u.a)(n,2),o=t[0],c=t[1];Object(a.useEffect)((function(){console.log("effect"),f().then((function(e){console.log("promise fulfilled",e.data),c(e.data)}))}),[]),console.log("render",o.length,"persons");var l=Object(a.useState)([]),i=Object(u.a)(l,2),s=i[0],m=i[1],d=Object(a.useState)(""),h=Object(u.a)(d,2),v=h[0],g=h[1];return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{newSearch:v,setNewSearch:g,persons:o,setFoundPeople:m}),r.a.createElement("h3",null,"add a new "),r.a.createElement(p,{persons:o,setPersons:c}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(b,{newSearch:v,foundPeople:s,persons:o,setPersons:c}))};c.a.render(r.a.createElement(v,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.2823793c.chunk.js.map